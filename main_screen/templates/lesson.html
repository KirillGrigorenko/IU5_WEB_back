{% extends 'base.html' %}

{% block search %} {% endblock %}

{% block container %}
<div class="space_schedule"></div>

{% if messages %}
    <div class="alert-container">
        {% for message in messages %}
            <div class="alert {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}

{% if data.id %}
    <div class="edit-lesson">
        <h2 class="edit-lesson-title">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞—è–≤–∫—É: {{ data.req_id }}</h2>
    
        <div class="edit-lesson-form">
            
            <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è:</label>
            <input type="text" id="name" name="name" value="">
        
            <label for="date">–î–∞—Ç–∞ –∑–∞–Ω—è—Ç–∏—è:</label>
            <input type="date" id="date" name="date" value="">
        
            <label for="time">–í—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏—è:</label>
            <input type="time" id="time" name="time" value="">
        
            <label for="formation_date">–î–∞—Ç–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è:</label>
            <input type="date" id="formation_date" name="formation_date" value="" readonly>
        
            <label for="formation_time">–í—Ä–µ–º—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è:</label>
            <input type="time" id="formation_time" name="formation_time" value="" readonly>
            
            {% if data.id%}   
            <form method="post" action="{% url 'remove_lesson_request' data.id %}">
                {% csrf_token %} 
                <button  type="submit" name="request_action" value="delete_lesson">‚úñ</button>
            </form>

            
            {% endif %}
        </div>
    </div>
    <form method="post" action="{% url 'update_headboy' data.id %}">
        {% csrf_token %}
        <h3 class="groups-title">–ì—Ä—É–ø–ø—ã:</h3>
        <div class="save-button-container">
            <button class= "btn_headboy" type="submit" name="request_action" value="update_headboy">üíæ –í—ã–±—Ä–∞—Ç—å —Å—Ç–∞—Ä–æ—Å—Ç—É</button>
        </div>
        <div class="groups-container">
            
                {% for lesson_group in data.groups %}
                    <div class="card-schedule">
                        {% if lesson_group.group.photo_url %}
                            <img src="{{ lesson_group.group.photo_url }}" class="card-image" alt="–§–æ—Ç–æ –≥—Ä—É–ø–ø—ã">
                        {% endif %}
                        <div class="card-content-schedule">
                            <p class="title-schedule">{{ lesson_group.group.facultet }}{{ lesson_group.group.kafedra }}-{{ lesson_group.group.course }}{{ lesson_group.group.count }}</p>

                                <label for="audience">–ê—É–¥–∏—Ç–æ—Ä–∏—è:</label>
                                <input type="text" name="audience" value="" class="small-input">
                            
                                <label for="building">–ó–¥–∞–Ω–∏–µ:</label>
                                <input type="text" name="building" value="" class="small-input">
                            
                                <input type="hidden" name="lesson_group_id" value="">

                                <label>
                                    <input type="radio" name="selected_group" value="{{ lesson_group.id }}">
                                    –°—Ç–∞—Ä–æ—Å—Ç–∞: {{ lesson_group.group.headboy }} (ID: {{ lesson_group.id }})
                                </label>
                            <p>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω: {{ lesson_group.group.contact_phone }}</p>
                            


                        </div>
                    </div>
                {% endfor %}
        </div>
        
    </form>
{% else %}
    <p class="no-lesson">–ó–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –µ—â–µ –Ω–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞.</p>
{% endif %}

{% endblock %}

{% block extra_scripts %}
<script>
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã
    window.addEventListener("beforeunload", function () {
        localStorage.setItem("scrollPosition", window.scrollY);
    });

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener("load", function () {
        const scrollPosition = localStorage.getItem("scrollPosition");
        if (scrollPosition) {
            window.scrollTo(0, scrollPosition);
            localStorage.removeItem("scrollPosition");
        }
    });
</script>
{% endblock %}